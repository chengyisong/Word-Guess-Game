<!DOCTYPE <!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Hangman</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="https://ubisafe.org/images/greening-clipart-ice-cream-cone-5.png" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Emilys+Candy|Pacifico" rel="stylesheet">
    <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-12">
                <header>Hangman for Foodies</header>
                <h1>Guess that Word (Yummy!)</h1>
                <hr>
             </div>
        </div>

        <div class="row">
            <div class="col-6">
                <p class="instruction">Press Any Key to Get Started:</p>
                <br>
                <div><span id="guessingArea"></span></div>
                <br>     
            </div>
                
            <div class="col-6">
                <div class="card">
                    <div class="card-body">
                        <div>Numbers of Guesses Remaining: <strong><span id="remain">10</span></strong></div>
                        <br>
                        <div>Letters Already Guessed: <strong><span id="guessed"></span></strong></div>
                    </div>
                </div>
            </div>
        </div>
        

        
    </div>
</body>


<script type=text/javascript>
    // Set Variables
    var remainNum=document.getElementById("remain");
    var blankByLetter=[];
    var isGuessed=[];
    var letterGuessed=[];

    // List of words
    var wordlist=["doughnut", "fudge", "yogurt", "cheesecake", "brownie", "cookie", "churro", "crepe", "macaroon", "mousse", "milkshake", "muffin", "pudding","souffle", "waffle", "gingerbread"];

    // Generate Random Word
    var word = wordlist[Math.floor(Math.random() * wordlist.length)];
    console.log(word);

    // Based on the Randomly Generated word, set initial blanks "_ _ _", and generate array isGuessed [false, false, ....] for each letter
    for (var i = 0; i < word.length; i++) {
        $("#guessingArea").append("_ ");
        isGuessed[i]=false;
    }    

    // Based on the Randomly Generated word, set initial # of lifes
    var remainNum = word.length;
    $("#remain").text(remainNum);

    // When Resetting the game..
    function reset() {
        word = wordlist[Math.floor(Math.random() * wordlist.length)];
        console.log(word);
        blankByLetter=[];
        isGuessed=[]
        $("#guessingArea").text("");
        for (var i = 0; i < word.length; i++) {
            $("#guessingArea").append("_ ");
            isGuessed[i]=false;
        }
        remainNum = word.length;
        $("#remain").text(remainNum);
        $("#guessed").text("");
    }

    // When Key is pressed...
    document.onkeyup = function(event) {
        
        // check if a Letter is entered.. 
        if (event.key === "a" || event.key === "b" || event.key === "c" || event.key === "d" || event.key === "e" || event.key === "f" ||event.key === "g" || event.key === "h" || event.key === "i" || event.key === "j" || event.key === "k" || event.key === "l" || event.key === "m" || event.key === "n" || event.key === "o" || event.key === "p" || event.key === "q" || event.key === "r" || event.key === "s" || event.key === "t" || event.key === "u" || event.key === "v" || event.key === "w" || event.key === "x" || event.key === "y" || event.key === "z") {

                
                // check if letter has been guessed:                
                if (letterGuessed.indexOf(event.key) >= 0) {
                    alert("This letter has been guessed: " + event.key);
                }
                
                // If it has not been guessed: Letter Guessed added; 

                else {
                    $("#guessed").append(event.key + ", ");
                    letterGuessed.push(event.key)

                    // Check letter-by-letter to see if the pressed key is correct
                    for (var i = 0; i < word.length; i++) {

                        // If the letter has already been guessed, then skip the loop
                        if (isGuessed[i] === false) {    
                        
                            if (word[i] === event.key) {
                                blankByLetter[i] = event.key;
                                isGuessed[i] = true;
                            }

                            else {
                                blankByLetter[i]="_";       
                            }
                        }                        
                    }

                    if (blankByLetter.indexOf(event.key) < 0) {
                        remainNum -= 1;
                    }

                    if (remainNum < 0) {
                        $("#remain").text("You are now cheating! Refresh the page to start a new game. ^_^");
                    }
                        
                    else $("#remain").text(remainNum);
                    console.log(remainNum);
                    
                    // Refresh Guessing Area with all guessed letters. Unguessed letters remains "__"
                    $("#guessingArea").text("");
                    for (var i=0; i < blankByLetter.length; i++) {
                        var newLetter = $("<span>");
                        newLetter.text(blankByLetter[i] + " ");
                        $("#guessingArea").append(newLetter);
                    }

                    // Check if all letters have been guessed
                    function checkGuessed(letterGuessed) {
                        return letterGuessed;
                    }
                    
                    if (isGuessed.every(checkGuessed)) {
                        alert ("Congratulations, you have guessed the word: \n" + word + "!");
                        var anotherGame = confirm("Do you want to play another game?")
                        if (anotherGame === true) {
                            reset();
                        }
                        
                    }

                    // Game over if Life = 0 
                    if (remainNum === 0) {
                        alert ("Sorry, you lost! :( \n\nThe word is: \n"+ word);
                        var anotherGame = confirm("Do you want to play another game?")
                        if (anotherGame === true) {
                            reset();
                        }                    
                    }
                }
        } 

        // When a non-letter key is pressed..
        else {
            alert("Please enter a Letter!");
        }

    }

        

</script>

</html>